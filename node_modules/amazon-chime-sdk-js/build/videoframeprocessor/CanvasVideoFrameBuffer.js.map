{"version":3,"file":"CanvasVideoFrameBuffer.js","sourceRoot":"","sources":["../../src/videoframeprocessor/CanvasVideoFrameBuffer.ts"],"names":[],"mappings":";AAAA,qEAAqE;AACrE,sCAAsC;;;;;;;;;;;AAItC;;GAEG;AACH,MAAqB,sBAAsB;IAMzC,YAAoB,MAAyB;QAAzB,WAAM,GAAN,MAAM,CAAmB;QALrC,cAAS,GAAY,KAAK,CAAC;IAKa,CAAC;IAEjD,OAAO;QACL,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;IACxB,CAAC;IAEK,mBAAmB;;YACvB,IAAI,IAAI,CAAC,SAAS,EAAE;gBAClB,OAAO,OAAO,CAAC,MAAM,CAAC,4BAA4B,CAAC,CAAC;aACrD;YACD,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACtC,CAAC;KAAA;IAED,eAAe;QACb,OAAO,IAAI,CAAC,MAAM,CAAC;IACrB,CAAC;CACF;AAvBD,yCAuBC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport VideoFrameBuffer from './VideoFrameBuffer';\n\n/**\n * [[CanvasVideoFrameBuffer]] implements [[VideoFrameBuffer]]. It internally holds an `HTMLCanvasElement`.\n */\nexport default class CanvasVideoFrameBuffer implements VideoFrameBuffer {\n  private destroyed: boolean = false;\n  framerate: number;\n  width: number;\n  height: number;\n\n  constructor(private canvas: HTMLCanvasElement) {}\n\n  destroy(): void {\n    this.canvas = null;\n    this.destroyed = true;\n  }\n\n  async asCanvasImageSource(): Promise<CanvasImageSource> {\n    if (this.destroyed) {\n      return Promise.reject('canvas buffer is destroyed');\n    }\n    return Promise.resolve(this.canvas);\n  }\n\n  asCanvasElement(): HTMLCanvasElement | null {\n    return this.canvas;\n  }\n}\n"]}