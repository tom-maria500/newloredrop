{"version":3,"file":"DataMessage.js","sourceRoot":"","sources":["../../src/datamessage/DataMessage.ts"],"names":[],"mappings":";AAAA,qEAAqE;AACrE,sCAAsC;;AAEtC,kDAAkD;AAClD,MAAqB,WAAW;IAkC9B,YACE,WAAmB,EACnB,KAAa,EACb,IAAgB,EAChB,gBAAwB,EACxB,oBAA4B,EAC5B,SAA0B;QAE1B,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;QACzC,IAAI,CAAC,oBAAoB,GAAG,oBAAoB,CAAC;QACjD,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC;IAC/B,CAAC;IAED;;OAEG;IACH,IAAI;QACF,OAAO,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IAC7C,CAAC;IAED;;OAEG;IACH,IAAI;QACF,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACzD,CAAC;CACF;AA/DD,8BA+DC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\n/* eslint @typescript-eslint/no-explicit-any: 0 */\nexport default class DataMessage {\n  /**\n   * Monotonically increasing server ingest time\n   */\n  readonly timestampMs: number;\n\n  /**\n   * Topic this message was sent on\n   */\n  readonly topic: string;\n\n  /**\n   * Data payload\n   */\n  readonly data: Uint8Array;\n\n  /**\n   * Sender attendee\n   */\n  readonly senderAttendeeId: string;\n\n  /**\n   * Sender attendee external user Id\n   */\n  readonly senderExternalUserId: string;\n\n  /**\n   * true if server throttled or rejected message\n   * false if server has posted the message to its recipients\n   * Throttling soft limit: Rate: 100, Burst:200\n   * Throttling hard limit: Rate: 100 * 5, Burst: 200 * 50 (i.e Rate: 500, Burst: 10000)\n   */\n  readonly throttled: boolean;\n\n  constructor(\n    timestampMs: number,\n    topic: string,\n    data: Uint8Array,\n    senderAttendeeId: string,\n    senderExternalUserId: string,\n    throttled?: boolean | null\n  ) {\n    this.timestampMs = timestampMs;\n    this.topic = topic;\n    this.data = data;\n    this.senderAttendeeId = senderAttendeeId;\n    this.senderExternalUserId = senderExternalUserId;\n    this.throttled = !!throttled;\n  }\n\n  /**\n   * Helper conversion methods to convert {@link Uint8Array} data to string\n   */\n  text(): string {\n    return new TextDecoder().decode(this.data);\n  }\n\n  /**\n   * Helper conversion methods to convert {@link Uint8Array} data to JSON\n   */\n  json(): any {\n    return JSON.parse(new TextDecoder().decode(this.data));\n  }\n}\n"]}