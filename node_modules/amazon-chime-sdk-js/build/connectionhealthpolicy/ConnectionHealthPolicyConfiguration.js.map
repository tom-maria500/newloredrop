{"version":3,"file":"ConnectionHealthPolicyConfiguration.js","sourceRoot":"","sources":["../../src/connectionhealthpolicy/ConnectionHealthPolicyConfiguration.ts"],"names":[],"mappings":";AAAA,qEAAqE;AACrE,sCAAsC;;;;;AAEtC,8IAAsH;AACtH,0JAAkI;AAElI,MAAqB,mCAAmC;IAAxD;QACE,cAAS,GAAW,CAAC,CAAC;QACtB,cAAS,GAAW,CAAC,CAAC;QACtB,kBAAa,GAAW,CAAC,CAAC;QAC1B,iCAA4B,GAAG,EAAE,CAAC;QAClC,4BAAuB,GAAG,KAAK,CAAC;QAChC,yBAAoB,GAAG,KAAK,CAAC;QAC7B,2BAAsB,GAAG,IAAI,CAAC;QAC9B,2BAAsB,GAAG,IAAI,CAAC;QAC9B,kBAAa,GAAG,IAAI,CAAC;QACrB,oBAAe,GAAG,KAAK,CAAC;QACxB,mBAAc,GAAG,KAAK,CAAC;QACvB,mBAAc,GAAG,KAAK,CAAC;QACvB,mBAAc,GAAG,KAAK,CAAC;QACvB,0BAAqB,GAAG,EAAE,CAAC;QAC3B,qBAAgB,GAAG,KAAK,CAAC;QACzB,mBAAc,GAAG,GAAG,CAAC;QACrB,oBAAe,GAAG,EAAE,CAAC;QACrB,uBAAkB,GAAG,CAAC,CAAC;QACvB,8BAAyB,GAAG,CAAC,CAAC;QAC9B,8BAAyB,GAAG,CAAC,CAAC;QAC9B,wBAAmB,GAAG,KAAK,CAAC;QAC5B,gCAA2B,GAAG,EAAE,CAAC;QAEjC;;;;;;WAMG;QACH,yCAAoC,GAAG,CAAC,CAAC;QAEzC;;;WAGG;QACH,yCAAoC,GAAG,IAAI,CAAC;QAE5C;;WAEG;QACH,gCAA2B,GAAG;YAC5B,gDAAsC;YACtC,sDAA4C;SAC7C,CAAC;QAEF;;;WAGG;QACH,sCAAiC,GAAG,EAAE,CAAC;QAEvC;;;;WAIG;QACH,6BAAwB,GAAG,GAAG,CAAC;QAE/B;;;;;WAKG;QACH,qCAAgC,GAAG,EAAE,CAAC;QAEtC;;;WAGG;QACH,6CAAwC,GAAG,CAAC,CAAC;IAC/C,CAAC;CAAA;AAzED,sDAyEC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport VideoEncodingCpuConnectionHealthPolicy from '../connectionhealthpolicy/VideoEncodingCpuConnectionHealthPolicy';\nimport VideoEncodingFramerateConnectionHealthPolicy from '../connectionhealthpolicy/VideoEncodingFramerateConnectionHealthPolicy';\n\nexport default class ConnectionHealthPolicyConfiguration {\n  minHealth: number = 0;\n  maxHealth: number = 1;\n  initialHealth: number = 1;\n  connectionUnhealthyThreshold = 25;\n  noSignalThresholdTimeMs = 10000;\n  connectionWaitTimeMs = 10000;\n  zeroBarsNoSignalTimeMs = 5000;\n  oneBarWeakSignalTimeMs = 5000;\n  twoBarsTimeMs = 5000;\n  threeBarsTimeMs = 10000;\n  fourBarsTimeMs = 20000;\n  fiveBarsTimeMs = 60000;\n  cooldownTimeMs = 60000;\n  pastSamplesToConsider = 15;\n  goodSignalTimeMs = 15000;\n  fractionalLoss = 0.5;\n  packetsExpected = 50;\n  maximumTimesToWarn = 2;\n  missedPongsLowerThreshold = 1;\n  missedPongsUpperThreshold = 4;\n  maximumAudioDelayMs = 60000;\n  maximumAudioDelayDataPoints = 10;\n\n  /**\n   * The number of samples required to consider sending-audio to be unhealthy\n   *\n   * The default value is derived from the median for time taken for receiving an attendee presence message from the\n   * server after joining. Attendee presence is only received when the client sends audio packets to the server, so\n   * this metric is used as a proxy.\n   */\n  sendingAudioFailureSamplesToConsider = 2;\n\n  /**\n   * The purpose of this field is to add a wait time/delay to our evaluation of sending audio health\n   * as the microphone may sometimes cause a delay in sending audio packets during the initial stages of a connection.\n   */\n  sendingAudioFailureInitialWaitTimeMs = 3000;\n\n  /**\n   * Policies and parameters related to video encoding health montoring\n   */\n  videoEncodingHealthPolicies = [\n    VideoEncodingCpuConnectionHealthPolicy,\n    VideoEncodingFramerateConnectionHealthPolicy,\n  ];\n\n  /**\n   * Consecutive seconds of high encode CPU to trigger video codec degradation in video encoding health monitoring.\n   * Increasing the value results in less sensitive video codec degradaion and vice versa.\n   */\n  consecutiveHighEncodeCpuThreshold = 10;\n\n  /**\n   * Encode time threshold to determine high CPU usage of software encoders in video encoding health monitoring.\n   * Recuding the value results in video codec degradation due to high CPU usage software encoder to be triggered\n   * at a lower CPU usage.\n   */\n  highEncodeCpuMsThreshold = 500;\n\n  /**\n   * Encode time per frame threshold to determine high CPU usage of software encoders in video encoding health\n   * monitoring. Recuding the value results in video codec degradation due to high CPU usage software encoder to\n   * be triggered at a lower CPU usage. Note that encoder counts each SVC spatial layer of a frame as an encoded\n   * frame. The magnification in framerate should be considered when configuring this parameter with SVC enabled.\n   */\n  highEncodeCpuMsPerFrameThreshold = 15;\n\n  /**\n   * Consecutive seconds of zero encoded framerate to trigger video codec degradation in video encoding health monitoring.\n   * Increasing the value results in less sensitive video codec degradaion and vice versa.\n   */\n  consecutiveVideoEncodingFailureThreshold = 5;\n}\n"]}