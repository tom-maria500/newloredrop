{"version":3,"file":"Versioning.js","sourceRoot":"","sources":["../../src/versioning/Versioning.ts"],"names":[],"mappings":";AAAA,qEAAqE;AACrE,sCAAsC;;;;;AAEtC,uGAA+E;AAC/E,wDAAgC;AA2BhC,MAAqB,UAAU;IAI7B;;OAEG;IACH,MAAM,KAAK,OAAO;QAChB,OAAO,qBAAqB,CAAC;IAC/B,CAAC;IAED;;OAEG;IACH,MAAM,KAAK,UAAU;QACnB,OAAO,iBAAO,CAAC,YAAY,CAAC;IAC9B,CAAC;IAED;;OAEG;IACH,MAAM,KAAK,gBAAgB;;QACzB,MAAM,CAAC,GAAG,iBAAO,CAAC,YAAY,CAAC,KAAK,CAClC,sGAAsG,CACvG,CAAC;QAEF,OAAO;YACL,KAAK,EAAE,MAAA,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,MAAM,0CAAE,KAAK;YACvB,KAAK,EAAE,MAAA,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,MAAM,0CAAE,KAAK;YACvB,KAAK,EAAE,MAAA,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,MAAM,0CAAE,KAAK;YACvB,UAAU,EAAE,MAAA,CAAC,aAAD,CAAC,uBAAD,CAAC,CAAE,MAAM,0CAAE,UAAU;SAClC,CAAC;IACJ,CAAC;IACD;;OAEG;IACH,MAAM,KAAK,QAAQ;QACjB,wBAAwB;QACxB,OAAO,iBAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;IACnC,CAAC;IAED;;OAEG;IACH,MAAM,KAAK,yBAAyB;QAClC,MAAM,eAAe,GAAG,IAAI,gCAAsB,EAAE,CAAC;QACrD,OAAO,GAAG,eAAe,CAAC,IAAI,EAAE,IAAI,eAAe,CAAC,YAAY,EAAE,EAAE,CAAC;IACvE,CAAC;IAED;;OAEG;IACH,MAAM,CAAC,cAAc,CAAC,GAAW;QAC/B,MAAM,cAAc,GAAG,IAAI,GAAG,CAAC,GAAG,CAAC,CAAC;QACpC,cAAc,CAAC,YAAY,CAAC,MAAM,CAAC,UAAU,CAAC,cAAc,EAAE,UAAU,CAAC,UAAU,CAAC,CAAC;QACrF,cAAc,CAAC,YAAY,CAAC,MAAM,CAChC,UAAU,CAAC,iBAAiB,EAC5B,UAAU,CAAC,yBAAyB,CACrC,CAAC;QACF,OAAO,cAAc,CAAC,QAAQ,EAAE,CAAC;IACnC,CAAC;;AA5DH,6BA6DC;AA5DQ,yBAAc,GAAG,gBAAgB,CAAC;AAClC,4BAAiB,GAAG,mBAAmB,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport DefaultBrowserBehavior from '../browserbehavior/DefaultBrowserBehavior';\nimport VERSION from './version';\n\n/**\n * The components of a SemVer version, separated so they can be used individually.\n */\nexport interface SemVer {\n  /**\n   * The major version.\n   */\n  major: string;\n\n  /**\n   * The minor version.\n   */\n  minor: string;\n\n  /**\n   * The patch version.\n   */\n  patch: string;\n\n  /**\n   * The pre release identifier\n   */\n  preRelease: string;\n}\n\nexport default class Versioning {\n  static X_AMZN_VERSION = 'X-Amzn-Version';\n  static X_AMZN_USER_AGENT = 'X-Amzn-User-Agent';\n\n  /**\n   * Return string representation of SDK name\n   */\n  static get sdkName(): string {\n    return 'amazon-chime-sdk-js';\n  }\n\n  /**\n   * Return string representation of SDK version\n   */\n  static get sdkVersion(): string {\n    return VERSION.semverString;\n  }\n\n  /**\n   * Returns the parts of the semver, so major/minor/patch can be extracted individually.\n   */\n  static get sdkVersionSemVer(): SemVer {\n    const v = VERSION.semverString.match(\n      /^(?<major>[0-9]+)\\.(?<minor>[0-9]+)((?:\\.(?<patch>[0-9]+))(?:-(?<preRelease>[a-zA-Z]+(\\.[0-9])*))?)?/\n    );\n\n    return {\n      major: v?.groups?.major,\n      minor: v?.groups?.minor,\n      patch: v?.groups?.patch,\n      preRelease: v?.groups?.preRelease,\n    };\n  }\n  /**\n   * Return the SHA-1 of the Git commit from which this build was created.\n   */\n  static get buildSHA(): string {\n    // Skip the leading 'g'.\n    return VERSION.hash.substring(1);\n  }\n\n  /**\n   * Return low-resolution string representation of SDK user agent (e.g. `chrome-78`)\n   */\n  static get sdkUserAgentLowResolution(): string {\n    const browserBehavior = new DefaultBrowserBehavior();\n    return `${browserBehavior.name()}-${browserBehavior.majorVersion()}`;\n  }\n\n  /**\n   * Return URL with versioning information appended\n   */\n  static urlWithVersion(url: string): string {\n    const urlWithVersion = new URL(url);\n    urlWithVersion.searchParams.append(Versioning.X_AMZN_VERSION, Versioning.sdkVersion);\n    urlWithVersion.searchParams.append(\n      Versioning.X_AMZN_USER_AGENT,\n      Versioning.sdkUserAgentLowResolution\n    );\n    return urlWithVersion.toString();\n  }\n}\n"]}